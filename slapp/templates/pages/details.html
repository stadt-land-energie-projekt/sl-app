{% load humanize %}

{% if municipalities %}
  <div class="row mt-4 g-0" id="municipality-results">
    <div class="col-3">
      <ul class="list-group rounded-0 text-truncate">
        <li class="list-group-item fw-bold bg-secondary text-white">Gemeinde</li>
        <li class="list-group-item">Fläche</li>
        <li class="list-group-item">Bevölkerung</li>
        <li class="list-group-item fw-bold heading">Installierte Leistung EE (Strom)</li>
        <li class="list-group-item">Windkraft</li>
        <li class="list-group-item">Freiflächen-PV</li>
        <li class="list-group-item">Dachflächen-PV</li>
        <li class="list-group-item">Biomasse</li>
        <li class="list-group-item fw-bold heading">Stromerzeugung aus EE</li>
        <li class="list-group-item">Windkraft</li>
        <li class="list-group-item">Freiflächen-PV</li>
        <li class="list-group-item">Dachflächen-PV</li>
        <li class="list-group-item">Biomasse</li>
        <li class="list-group-item fw-bold heading">EE-Potenziale</li>
        <li class="list-group-item">Windkraft</li>
        <li class="list-group-item">Freiflächen-PV</li>
        <li class="list-group-item">Dachflächen-PV</li>
        <li class="list-group-item fw-bold heading">EE-Potenzialausschöpfung</li>
        <li class="list-group-item">Windkraft</li>
        <li class="list-group-item">Freiflächen-PV</li>
        <li class="list-group-item">Dachflächen-PV</li>
        <li class="list-group-item fw-bold heading">Energiebedarf</li>
        <li class="list-group-item">Strombedarf</li>
        <li class="list-group-item">Wärmebedarf gesamt</li>
        <li class="list-group-item">Wärmebedarf Fernwärme</li>
        <li class="list-group-item">Wärmebedarf dezentral</li>
      </ul>
    </div>
    {% for municipality in municipalities %}
      <div class="col-2 text-truncate">
        <ul class="list-group rounded-0">
          <li class="list-group-item text-end fw-bold bg-secondary text-white">{{ municipality.name }}</li>
          <li class="list-group-item text-end">{{ municipality.area|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.population|floatformat:0 }}</li>
          <li class="list-group-item text-end fw-bold heading">{{ municipality.capacity_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_wind|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_pv_ground|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_pv_roof|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_bio|intcomma }}</li>
          <li class="list-group-item text-end fw-bold heading">{{ municipality.production_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.production_wind|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.production_pv_ground|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.production_pv_roof|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.production_bio|intcomma }}</li>
          <li class="list-group-item text-end fw-bold heading">
            {{ municipality.potentialarea_total_installable_power|intcomma }}
          </li>
          <li class="list-group-item text-end">{{ municipality.potentialarea_wind_installable_power|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.potentialarea_pv_ground_installable_power|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.potentialarea_pv_roof_installable_power|intcomma }}</li>
          <li class="list-group-item text-end fw-bold heading">{{ municipality.capacity_potential_usage_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_potential_usage_wind|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_potential_usage_pv_ground|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.capacity_potential_usage_pv_roof|intcomma }}</li>
          <li class="list-group-item text-end fw-bold heading">{{ municipality.energy_demand_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.power_demand_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.heat_demand_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.heat_demand_cen_total|intcomma }}</li>
          <li class="list-group-item text-end">{{ municipality.heat_demand_dec_total|intcomma }}</li>
        </ul>
      </div>
    {% endfor %}
    <div class="col-1">
      <ul class="list-group rounded-0">
        <li class="list-group-item bg-secondary text-white">Einheit</li>
        <li class="list-group-item">km²</li>
        <li class="list-group-item">&nbsp;</li>
        <li class="list-group-item fw-bold heading">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item fw-bold heading">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item fw-bold heading">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item">MW</li>
        <li class="list-group-item fw-bold heading">%</li>
        <li class="list-group-item">%</li>
        <li class="list-group-item">%</li>
        <li class="list-group-item">%</li>
        <li class="list-group-item fw-bold heading">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item">GWh</li>
        <li class="list-group-item">GWh</li>
      </ul>
    </div>
  </div>
  <div id="csv-link">
    <a href="{% url 'explorer:details-csv' %}?{% for municipality_ids in municipalities %}id={{ municipality_ids.id }}&{% endfor %}">Als CSV herunterladen</a>
  </div>
{% else %}
  <div class="mt-3">Fügen Sie zunächst Gemeinden für die Optimierung hinzu.</div>
{% endif %}
