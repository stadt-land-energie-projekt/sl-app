<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aligned Horizontal Bar Chart with Table</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
      }

      .container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        margin-top: 20px;
      }

      .chart-container {
        width: 500px;
        height: 300px;
      }

      .table-container {
        border-collapse: collapse;
      }

      table {
        border-collapse: collapse;
        width: 200px;
      }

      th,
      td {
        border: 1px solid black;
        text-align: left;
      }

      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Chart -->
      <div id="chart" class="chart-container"></div>
      <!-- Table -->
      <table class="table-container">
        <thead>
          <tr>
            <th>Category</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody id="dataTable">
          <!-- Data rows inserted dynamically -->
        </tbody>
      </table>
    </div>
    <script>
      var chartDom = document.getElementById('chart');
      var myChart = echarts.init(chartDom);

      var data = [{
        name: 'Category A',
        value: 120
      }, {
        name: 'Category B',
        value: 200
      }, {
        name: 'Category C',
        value: 150
      }, {
        name: 'Category D',
        value: 80
      }];

      var option = {
        title: {
          text: 'Horizontal Bar Chart',
          left: 'center'
        },
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          }
        },
        grid: {
          left: '0%',
          right: '10%',
          top: '20px',
          bottom: '0%',
          containLabel: false
        },
        xAxis: {
          type: 'value'
        },
        yAxis: {
          type: 'category',
          data: data.map(item => item.name),
          axisTick: {
            show: false
          }
        },
        series: [{
          type: 'bar',
          data: data.map(item => item.value),
          barWidth: 40, // Controls bar height
          itemStyle: {
            color: '#3B82F6'
          }
        }]
      };

      myChart.setOption(option);

      // Populate the table dynamically
      var tableBody = document.getElementById('dataTable');
      data.forEach(item => {
        var row = `<tr><td>${item.name}</td><td>${item.value}</td></tr>`;
        tableBody.innerHTML += row;
      });

      // Ensure table row height matches bar height
      function syncRowHeight() {
        const bars = document.querySelectorAll('.table-container tbody tr');
        const chartHeight = document.getElementById('chart').clientHeight;
        const rowHeight = (chartHeight - 20) / data.length; // Set row height equal to bars; -20 comes from grid top in order to allow table header
        bars.forEach(row => row.style.height = rowHeight + 'px');
      }

      syncRowHeight(); // Align on load
      window.addEventListener('resize', syncRowHeight); // Re-align on resize
    </script>
  </body>
</html>
